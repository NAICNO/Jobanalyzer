<html>
  <head>
    <link rel=stylesheet type=text/css href="table-style.css"/>
    <title>CLUSTER policy violators dashboard</title>
  </head>

  <body>
    <h1 id=main_title>CLUSTER policy violators</h1>
    
    <p>The following jobs have been running significantly outside of policy and are probably
      not appropriate to run on this cluster.  The list is recomputed at noon and midnight
      and goes back four weeks.</p>

    <div id=report></div>

    <script src="testflag.js"></script>
    <script src="dashboard.js"></script>
    <script>
      rewriteTitle()
      var fields = [{name: "Host", tag: "hostname"},
		    {name: "User", tag: "user"},
		    {name: "Job",  tag: "id"},
		    {name: "Command", tag:"cmd"},
		    {name: "First seen", tag:"started-on-or-before"},
		    {name: "Last seen", tag:"last-seen"},
		    {name: "CPU peak", tag:"cpu-peak"},
		    {name: "CPU% avg", tag:"rcpu-avg"},
		    {name: "CPU% peak", tag:"rcpu-peak"},
		    {name: "Mem% avg", tag:"rmem-avg"},
		    {name: "Mem% peak", tag:"rmem-peak"}]
      render_table(tag_file("violator-report.json"),
		   fields,
		   document.getElementById("report"),
		   cmp_string_fields("last-seen", true))
    </script>
  </body>
</html>
