<html>
  <head>
    <link rel=stylesheet type=text/css href="table-style.css"/>
    <title>ML nodes CPU hog dashboard</title>
  </head>

  <body>
    <h1>ML nodes CPU hogs</h1>
    
    <p>The following jobs have used significant CPU time without using
    any GPU time and are probably not appropriate to run on the ML
    systems.  The list is recomputed at noon and midnight and goes back four weeks.</p>

    <div id=report></div>

    <script src="render-table.js"></script>
    <script>
      // TODO: last-seen is not present in data
      // TODO: which fields do we really want to show?
      // TODO: Sort by something?
      var file = "cpuhog-report.json";
      var fields = [{name: "Host", tag: "hostname"},
		    {name: "User", tag: "user"},
		    {name: "Job",  tag: "id"},
		    {name: "Command", tag:"cmd"},
		    {name: "First seen", tag:"started-on-or-before"},
		    {name: "Last seen", tag:"last-seen"},
		    {name: "CPU peak", tag:"cpu-peak"},
		    {name: "RCPU avg", tag:"rcpu-avg"},
		    {name: "RCPU peak", tag:"rcpu-peak"},
		    {name: "RMem avg", tag:"rmem-avg"},
		    {name: "RMem peak", tag:"rmem-peak"}]
      render_table(file, fields, document.getElementById("report"), cmp_string_fields("last-seen", true))
    </script>
  </body>
</html>
